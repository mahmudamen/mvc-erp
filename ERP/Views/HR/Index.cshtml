@{ViewBag.Title = "HR ";}
<script language="javascript" type="text/javascript">
    function empcountfuc() {
        $.ajax({
            url: '/ERP/HR/empcountfuc', cache: false, type: "POST", success: function (data) {
                $('#empcount').text(parseFloat(data).toFixed(0))
            }
        });
    }
    function ORDlst() {
        $.ajax({
            url: '/ERP/Casher/ORDlst', cache: false, type: "POST", success: function (data) {
                $('#lastname').val(data)
            }
        });
    }
    function ORDlstnum() {
        $.ajax({
            url: '/ERP/Casher/ORDlstnum', cache: false, type: "POST", success: function (data) {
                $('#orderfk').val(data)
            }
        });
    }
    function Ordpk() {
        $.ajax({
            url: '/ERP/Casher/Ordpk', cache: false, type: "POST", success: function (data) {
                $('#orderpk').val(data)
            }
        });
    }
    function Totfuc() {
        $.ajax({
            url: '/ERP/Casher/Totfuc?id=' + parseInt($('#last').text()), cache: false, type: "POST", success: function (data) {
                $('#Totfuc').text(parseFloat(data).toFixed(0))
            }
        });
    }
</script>
<input type="hidden" id="prd" value=@ViewBag.prd /><input type="hidden" id="cby" value=@HttpContext.Current.User.Identity.Name.Split('|')[1] />
<div class="modal fade" id="mdcashrp">
    <div class="modal-prn">
        <div class="modal-contentp">
            <div class="modal-header text-center" style="background-color:#fff">
                <a href="javascript:;" id="bbcashrp" type="button" class="btn btn-sm btn-success no-print">طباعة</a>
                <a type="button" href="javascript:;" id="prn" class="btn btn-sm btn-danger no-print" data-dismiss="modal">إغلاق</a>
                <div class="form-group" style="margin:0px 5px 0px 5px">
                    <label>تقرير اليومية</label>
                    <input type="text" id="qdate" class="form-control text-center" style="max-width:200px" value=20 autofocus="autofocus" />

                </div>
            </div>

            <div class="panel-body" style="max-height:480px; min-height:400px; padding:5px">
                <table id="tbcashrp" class="table table-striped table-bordered dt-responsive " style="margin-bottom:0px" cellspacing="0" width="auto">
                    <thead>
                        <tr>
                            <th class="text-center">الصنف</th>
                            <th class="text-center">اجمالي</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>

                            <th class="text-center">الإجمالي:</th>
                            <th></th>

                        </tr>
                    </tfoot>
                    <tbody>
                        <tr>

                            <td></td>
                            <td class="text-center"></td>

                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="form-group">
                <label>تاريخ:</label>
                <label id="ZDPRNT" style="margin-left:5px">@DateTime.Today.ToString("yyyy-MMM-dd")</label>
                <label style="margin:0px 2px">الوقت:</label>
                <label id="ZTPRNT">@DateTime.Now.ToString("hh:mm tt")</label>
                <label>أصـل</label>
            </div>

        </div>
    </div>
</div>
<div class="modal fade" id="print">
    <div class="modal-prn">
        <div class="modal-contentp">
            <div class="modal-header text-center" style="background-color:#fff">
                <a href="javascript:;" id="prncli" type="button" class="btn btn-sm btn-success no-print">طباعة</a>
                <a type="button" href="javascript:;" id="prn" class="btn btn-sm btn-danger no-print" data-dismiss="modal">إغلاق</a>
            </div>

            <div class="form-group" style="margin:5px 10px ;font-size:14px">
                <label>رقم:</label>
                <label id="ordersid" style="margin-left:10px"></label>
            </div>
            <div class="form-group" style="margin:5px 10px ;font-size:14px ;font-family:Tahoma">
                <label>العميل:</label>
                <label id="ordersname" style="margin-left:10px ;font-size:20px"></label>
            </div>
            <div class="panel-body" style="max-height:500px; min-height:400px; padding:5px">
                <table id="ordersforprint" class="table table-striped table-bordered dt-responsive " style="margin-bottom:0px" cellspacing="0" width="auto">
                    <thead>
                        <tr>
                            <th></th>
                            <th class="text-center">الصنف</th>
                            <th class="text-center">السعر</th>
                            <th class="text-center">الكمية</th>
                            <th class="text-center">اجمالي</th>

                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th></th>
                            <th class="text-center">الإجمالي:</th>
                            <th></th>
                            <th></th>
                            <th></th>

                        </tr>
                    </tfoot>
                    <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td class="text-center"></td>
                            <td class="text-center"></td>
                            <td class="text-center"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="form-group">
                <label>تاريخ:</label>
                <label id="ZDPRNT" style="margin-left:5px">@DateTime.Today.ToString("yyyy-MMM-dd")</label>
                <label style="margin:0px 2px">الوقت:</label>
                <label id="ZTPRNT">@DateTime.Now.ToString("hh:mm tt")</label>
                <label>أصـل</label>
            </div>

        </div>
    </div>
</div>
<div class="modal fade" id="modtopten">
    <div class="modal-prn">
        <div class="modal-contentp">
            <div class="modal-header text-center" style="background-color:#fff">
                <a href="javascript:;" id="prncli" type="button" class="btn btn-sm btn-success no-print">طباعة</a>
                <a type="button" href="javascript:;" id="prn" class="btn btn-sm btn-danger no-print" data-dismiss="modal">إغلاق</a>
            </div>
            <div class="panel-body" style="max-height:400px; min-height:250px; padding:5px">
                <table id="tbtopten" class="table table-striped table-bordered dt-responsive " style="margin-bottom:0px" cellspacing="0" width="auto">
                    <thead>
                        <tr>
                            <th class="text-center">العميل</th>
                            <th class="text-center">عدد </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-center"></td>
                            <td class="text-center"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modtoptenord">
    <div class="modal-prn">
        <div class="modal-contentp">
            <div class="modal-header text-center" style="background-color:#fff">
                <a href="javascript:;" id="prncli" type="button" class="btn btn-sm btn-success no-print">طباعة</a>
                <a type="button" href="javascript:;" id="prn" class="btn btn-sm btn-danger no-print" data-dismiss="modal">إغلاق</a>
                <div class="user-image">
                    <img src="~/Assets/erp.png" class="img-thumbnail" height="20%" style="border:none ;max-width:50% !important; background-color:none">
                </div>
            </div>
            <div class="panel-body" style="max-height:400px; min-height:250px; padding:5px">
                <table id="tbtoptenord" class="table table-striped table-bordered dt-responsive " style="margin-bottom:0px" cellspacing="0" width="auto">
                    <thead>
                        <tr>
                            <th class="text-center">الصنف</th>
                            <th class="text-center">عدد </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-center"></td>
                            <td class="text-center"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="MDaddEmp">
    <div class="modal-med">
        <div class="modal-content">
            <div class="modal-header">
                <label class="modal-title">أنشاء ملف جديد لموظف</label>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>اسم الموظف</label>
                            <input type="text" id="Empname" placeholder="اسم الموظف بالكامل" class="form-control text-center" style="max-width:500px; width:600px;" />
                        </div>
                    </div>
                    <br />
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>التاريخ</label>
                            <input type="date" id="createDate" class="form-control text-center" style="max-width:150px" title="تاريخ انشاء ملف الموظف" value=@DateTime.Today.ToString("yyyy-MM-dd") autofocus="autofocus" />
                       </div>
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>الرقم القومي</label>
                        <input type="number" id="NationalID" class="form-control text-center" title="الرقم القومي" style="max-width:150px" required />
                        </div>
                   </div>
                        <br />
                   <div class="form-inline ls_form">
                         <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>العنوان</label>
                            <input type="text" id="address" placeholder="عنوان الموظف" title="عنوان الموظف بالكامل" class="form-control text-center" style="max-width:550px ; width:550px" />
                         </div>
                   </div>
                   <br />
                   <div class="form-inline ls_form">
                       <div class="form-group" style="margin:0px 5px 0px 5px">
                         <label>الحالة الاجتماعية</label>
                         @*<input type="date" id="createDate" class="form-control text-center" style="max-width:150px" />*@
                         @Html.DropDownList("SOCIALSTATUSES", (SelectList)ViewBag.SOCIALSTATUSES, htmlAttributes: new {
                        @class = "form-control", @style = "max-width:100px;",@title = "الحالة الاجتماعية للموظف ", id = "SOCIALSTATUSES" })
                       </div>
                    <div class="form-group" style="margin:0px 5px 0px 5px">
                          <label>النوع</label>
                          <select id="Gender" class="form-control" name="cwshft" style="max-width:100px">
                             <option value=true>  ذكر</option>
                             <option value=false>أنثي</option>
                          </select>
                     </div>
                       <div class="form-group" style="margin:0px 5px 0px 5px">
                           <label>الكادر</label>
                           @*<input type="date" id="createDate" class="form-control text-center" style="max-width:150px" />*@
                           @Html.DropDownList("jobkadr", (SelectList)ViewBag.jobkadr, htmlAttributes: new {@title = "اختيار كادر يغير قائمة المجموعات النوعية " , @class = "form-control", @style = "max-width:120px; width:120px;",  id = "jobkadr" })
                       </div>
                       <div class="form-group" style="margin:0px 5px 0px 5px">
                           <label>المجموعة النوعية</label>
                           @*<input type="date" id="createDate" class="form-control text-center" style="max-width:150px" />*@
                           @Html.DropDownList("Emp_JCat_FK", (SelectList)ViewBag.Emp_JCat_FK, htmlAttributes: new {@title = "المجموعات النوعية تختلف بإختلاف الكادر ", @class = "form-control", @style = "max-width:150px;width:150px;", id = "Emp_JCat_FK" })
                       </div>
                   </div>
                    <br />
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>الدرجة المالية</label>
                            @Html.DropDownList("JobGarde", (SelectList)ViewBag.JobGarde, htmlAttributes: new {@title ="الدرجة المالية", @class = "form-control", @style = "max-width:150px;width:150px;", id = "JobGarde" })
                        </div>

                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>الحالة الوظيفية</label>
                            @Html.DropDownList("JobStatus", (SelectList)ViewBag.JobStatus, htmlAttributes: new {@title = "الحالة الوظيفية ", @class = "form-control", @style = "max-width:150px;width:150px;", id = "JobStatus" })
                        </div>
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>الإدارة</label>
                            @Html.DropDownList("Hr_dept", (SelectList)ViewBag.Hr_dept, htmlAttributes: new {@title="الإدارة التابع لها الموظف", @class = "form-control", @style = "max-width:150px;width:150px;", id = "Hr_dept" })
                        </div>
                    </div>
                  </div>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" id="adNewEmpbtn" type="button" class="btn btn-sm btn-success">اضافة</a>
                <a type="button" href="javascript:;" class="btn btn-sm btn-danger" data-dismiss="modal">إغلاق</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="nguest">
    <div class="modal-med">
        <div class="modal-content">
            <div class="modal-header">
                <label class="modal-title">ضيف جديد</label>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>اسم الضيف </label>
                            <input type="text" id="gname" class="form-control text-center" autofocus="autofocus" style="max-width:300px" />
                            <input type="hidden" id="asdf" />
                        </div>
                    </div>
                    <br />
                </div>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" id="adgst" type="button" class="btn btn-sm btn-success">اضافة</a>
                <a type="button" href="javascript:;" class="btn btn-sm btn-danger" data-dismiss="modal">إغلاق</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="mdacc">
    <div class="modal-med">
        <div class="modal-content">
            <div class="modal-header">
                <label class="modal-title">حساب جديد</label>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>اسم الحساب </label>
                            <input type="text" id="expnme" class="form-control text-center" autofocus="autofocus" style="max-width:300px" />
                        </div>
                    </div>
                    <br />
                </div>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" id="accad" type="button" class="btn btn-sm btn-success">اضافة</a>
                <a type="button" href="javascript:;" class="btn btn-sm btn-danger" data-dismiss="modal">إغلاق</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="edguest">
    <div class="modal-med">
        <div class="modal-content">
            <div class="modal-header">
                <label class="modal-title">تعديل طلب</label>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>رقم الشفت</label>
                            <input type="text" id="eddate" class="form-control text-center" style="max-width:300px" value=20 autofocus="autofocus" />
                            <input type="hidden" id="oid" />
                        </div>
                    </div>
                    <br />
                </div>
                <div class="panel-body" style="max-height:300px; min-height:200px; padding:10px">
                    <table id="tborday" class="table table-striped table-bordered dt-responsive " style="margin-bottom:0px" cellspacing="0" width="100%">
                        <thead>
                            <tr style="background-color:slateblue !important ; color:white">
                                <th></th>
                                <th class="text-center">رقم الطلب</th>
                                <th class="text-center">اسم العميل</th>
                                <th class="text-center">فعال</th>
                                <th class="text-center">الغاء طلب</th>
                                <th class="text-center">تفاصيل</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="panel-body" style="max-height:300px; min-height:200px; padding:10px">
                    <table id="tbdetail" class="table table-striped table-bordered dt-responsive " style="margin-bottom:0px" cellspacing="0" width="100%">
                        <thead>
                            <tr style="background-color:slateblue !important ; color:white">
                                <th></th>
                                <th class="text-center">الصنف</th>
                                <th class="text-center">السعر</th>
                                <th class="text-center">الكمية</th>
                                <th class="text-center">اجمالي</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th></th>
                                <th class="text-center">الإجمالي:</th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <tr>
                                <td></td>
                                <td class="text-center"></td>
                                <td class="text-center"></td>
                                <td class="text-center"></td>
                                <td class="text-center"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <a type="button" href="javascript:;" class="btn btn-sm btn-danger" data-dismiss="modal">إغلاق</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="mdexp">
    <div class="modal-med">
        <div class="modal-content">
            <div class="modal-header">
                <label class="modal-title"></label>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>دليل المصروفات </label>
                        </div>
                    </div>
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <a href="javascript:;" id="adacc" type="button" style="font-style:italic;" class="btn btn-sm btn-primary">اضافة حساب جديد</a>
                        </div>
                    </div>
                    <br />
                </div>
                <div class="panel-body" style="max-height:250px; min-height:200px; padding:10px; width:auto">
                    <table id="tbexplist" class="table table-striped table-bordered dt-responsive " style="margin-bottom:0px" cellspacing="0" width="100%">
                        <thead>
                            <tr style="background-color:slateblue !important ; color:white;">
                                <th class="text-center">رقم الحساب</th>
                                <th class="text-center">اسم الحساب</th>
                                <th class="text-center">مبلغ</th>
                                <th class="text-center">اضافة</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-center"></td>
                                <td class="text-center"></td>
                                <td class="text-center"></td>
                                <td class="text-center"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <a type="button" href="javascript:;" class="btn btn-sm btn-danger" data-dismiss="modal">إغلاق</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="Addexp">
    <div class="modal-med">
        <div class="modal-content">
            <div class="modal-header">
                <label class="modal-title">اضافة مصروفات جديد</label>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>رقم الحساب </label>
                            <input type="text" id="exid" class="form-control text-center" style="max-width:50px" readonly="readonly" />
                        </div>
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label> اسم الحساب </label>
                            <input type="text" id="exname" class="form-control text-center" style="max-width:250px" readonly="readonly" />
                        </div>
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>التاريخ</label>
                            <input type="date" id="exdat" class="form-control text-center" style="max-width:150px" value=@DateTime.Today.ToString("yyyy-MM-dd") />
                        </div>
                    </div>
                    <br />
                </div>
                <div class="row">
                    <div class="form-inline ls_form">
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>المبلغ</label>
                            <input type="number" id="exval" class="form-control text-center" style="max-width:150px" />
                        </div>
                        <div class="form-group" style="margin:0px 5px 0px 5px">
                            <label>ملاحظات</label>
                            <input type="text" id="remark" class="form-control text-center" style="max-width:550px" />
                        </div>
                    </div>
                    <br />
                </div>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" id="adexp" type="button" class="btn btn-sm btn-success">اضافة</a>
                <a type="button" href="javascript:;" class="btn btn-sm btn-danger" data-dismiss="modal">إغلاق</a>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-3 col-sm-6" style="padding: 15px;">
        <div class="ibox float-e-margins">
            <div class="ibox-content">
                <h3 class="no-margins text-center" id="empcount"></h3>
                <h4 class="no-margins text-center" id="empcount">عدد الموظفين</h4>
            </div>
            <div class="ibox-content">
                <h3 class="no-margins text-center" id="Totfuc"></h3>
            </div>
            <div class="ibox-content text-center">
                @DateTime.Today.ToString("yyyy-MM-dd")
                <div class="user-image">
                </div>
            </div>
        </div>
        <div class="widget widget-stats bg-blue-lighter">
            <div class="stats-icon"><i class="glyphicon glyphicon-list"></i></div>
            <div class="stats-link">
                <a class="theme-collapse-btn" style="font-style:normal; font-size:20px ; font-family:Aharoni" id="cref"> الإدارة <i class="glyphicon glyphicon-list"></i></a>
            </div>
        </div>
      </div>
    <div class="col-md-4" style="padding: 12px;">
        <div class="panel panel-primary" style="margin-bottom:5px">
            <div class="panel-heading" style="padding: 10px 10px;">
                <label class="panel-title">الموظفين</label>
                <button class="btn btn-xs btn-success pull-left"  title="انشاء ملف جديد لموظف " id="Rempadd"><i class="glyphicon glyphicon-plus-sign"></i></button>
            </div>
            <br />
            <div class="panel-body" style="max-height:300px; min-height:300px; padding:10px">
                <table id="example" class="table table-striped table-bordered dt-responsive" cellspacing="0" width="100%">
                    <thead>
                        <tr >
                            <th></th>
                            <th class="text-center">الموظف</th>
                            <th class="text-center">تفاصيل</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td class="text-center"></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
</div>
<div class="col-md-4" style="padding: 12px;">
        <div class="panel panel-primary" style="margin-bottom:5px">
            <div class="panel-heading" style="padding: 10px 10px;">
                <label class="panel-title">الادارات</label>
                <button class="btn btn-xs btn-success pull-left" id="rdeptadd"><i class="glyphicon glyphicon-plus-sign"></i></button>
            </div>
            <br />
            <div class="panel-body" style="max-height:300px; min-height:300px; padding:10px">
                <table id="tbdept" class="table table-striped table-bordered dt-responsive" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th></th>
                            <th class="text-center">الإدارة</th>
                            <th class="text-center">تفاصيل</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td class="text-center"></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>  
</div>
<link href="~/Content/dt.css" rel="stylesheet" />
@section scripts{
    <script src="~/Scripts/dts.js"></script>
    <script>
        $(document).ready(function () {
            empcountfuc();
// var emp  table
        var table = $('#example').DataTable({
            "pageLength": 5,bProcessing: false, sAjaxSource: '/ERP/HR/tbempdef', lengthChange: false,scrollY: '120px', scrollCollapse: true, bPaginate: false,
            dom: 'Bfrtip',
            buttons: [{
                extend: 'print', title: function () { return 'جهاز مدينة أسوان الجديدة' }, text: '<i class="glyphicon glyphicon-print"></i>',
                exportOptions: { modifier: { page: 'current' } },
                customize: function (win) {
                    $(win.document.body).find('table').addClass('display').css('font-size', '12px');
                    $(win.document.body).find('h4').css('text-align', 'center');
                    $(win.document.body).find('h4').text('موظفي جهاز المدينة');
                }
            },
            ],
            columns: [
        { "data": "Emp_Id", "sClass": "dt-center", "width": "10%" },
        { "data": "Emp_Name", "width": "30%" },
        {
        "data": null, "sClass": "dt-center", "width": "10%", "orderable": false,
        "defaultContent": "<button  class='bbutton small btn-info'id='adp'><i class='glyphicon glyphicon-edit'></button>"
        }
            ]
        });
        $('#example tbody').on('click', 'tr', function () {
            var table = $("#example").DataTable();
            table.$('tr.selected').removeClass('selected');
            $(this).closest('tr').addClass('selected');
        });
// var dept table
        var table = $('#tbdept').DataTable({
            bProcessing: false, sAjaxSource: '/ERP/HR/tbdeptdef', lengthChange: false, scrollY: '120px', scrollCollapse: true, bPaginate: false,
            dom: 'Bfrtip',
            buttons: [{
                extend: 'print', title: function () { return 'جهاز مدينة أسوان الجديدة' }, text: '<i class="glyphicon glyphicon-print"></i>',
                exportOptions: { modifier: { page: 'current' } }, scrollY: '120px', scrollCollapse: true, bPaginate: false,
                customize: function (win) {
                    $(win.document.body).find('table').addClass('display').css('font-size', '12px');
                    $(win.document.body).find('h4').css('text-align', 'center');
                    $(win.document.body).find('h4').text('الإدارات');
                }
            },
            ],
            columns: [
        { "data": "DeptID", "sClass": "dt-center", "width": "10%" },
        { "data": "DeptName", "width": "30%" },
        {
            "data": null, "sClass": "dt-center", "width": "10%", "orderable": false,
            "defaultContent": "<button  class='bbutton small btn-info'id='adp'><i class='glyphicon glyphicon-edit'></button>"
        }
            ]
        });
// select  function
        $('#tbdept tbody').on('click', 'tr', function () {
            var table = $("#tbdept").DataTable();
            table.$('tr.selected').removeClass('selected');
            $(this).closest('tr').addClass('selected');
        });
        });
// run modal
        $('#Rempadd').click(function () {
            $('#MDaddEmp').modal({ backdrop: false });
        });
        // change list triggers
        $('#jobkadr').change(function () {
            var jobkadr = $('#jobkadr').val();
            var url = '/ERP/HR/jcatfunk?id=' + jobkadr;
            $.ajax({
                type: "POST",
                cache: false,
                url: url,
               // datatype: "json",
                data: { jobkadr },
                        success: function (data) {
                            $('#Emp_JCat_FK').empty();
                            $('#Emp_JCat_FK').html('').append('<option value="">- -  اختار الجموعة النوعية - -</option>');
                            $.each(data, function (index, item) {
                                var p = new Option(item.Text, item.Value);
                                $('#Emp_JCat_FK').append(p);
                            });
                            $('#Emp_JCat_FK').trigger('change');
                        },
            });
        });
        $('#adNewEmpbtn').click(function () {
            $.ajax({
                url: "@(Url.Action("adnewemp", "HR"))",
                type: "GET",
            contentType: "application/json; charset=utf-8",
            data: {
                empname: $('#Empname').val(),
                createDate: $('#createDate').val(),
                NationalID: $('#NationalID').val(),
                address: $('#address').val(),
                SOCIALSTATUSES: $('#SOCIALSTATUSES').val(),
                Gender: $('#Gender').val(),
                jobkadr: $('#jobkadr').val(),
                Emp_JCat_FK: $('#Emp_JCat_FK').val(),
                JobGarde: $('#JobGarde').val(),
                JobStatus: $('#JobStatus').val(),
                Hr_dept: $('#Hr_dept').val(),
                cby: $('#cby').val()
            },
            dataType: "json",
            success: function (data) {
                if (data.Success) { alert(data.Success); }
                $('#MDaddEmp').modal('hide');
                var e = $("#example").DataTable();
                e.$('tr.selected').removeClass('selected');
                e.clear();
                e.draw();
                e.ajax.url('/ERP/HR/tbempdef').load()
            },
            error: function (response) {
                alert("error : " + response);
            }
        });
        });
    </script>
}
